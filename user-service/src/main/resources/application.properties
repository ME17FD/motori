spring.application.name=user-service

# OAuth2 Resource Server (Keycloak JWT)
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8082/realms/motori_realm
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8082/realms/motori_realm/protocol/openid-connect/certs

# Keycloak Admin Client (realm: motori_realm, client: user-service)
keycloak.admin.server-url=${KEYCLOAK_ADMIN_SERVER_URL:http://localhost:8082}
keycloak.admin.realm=${KEYCLOAK_ADMIN_REALM:motori_realm}
keycloak.admin.client-id=${KEYCLOAK_ADMIN_CLIENT_ID:user-service}
keycloak.admin.client-secret=${KEYCLOAK_ADMIN_CLIENT_SECRET:Dw87RYhrT1BZ5a68EXZOgCNBddBbYqoo}

# Keycloak (user login / token)
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:http://localhost:8082}
keycloak.realm=${KEYCLOAK_REALM:motori_realm}
keycloak.resource=${KEYCLOAK_RESOURCE:user-service}
keycloak.credentials.secret=${KEYCLOAK_CREDENTIALS_SECRET:Dw87RYhrT1BZ5a68EXZOgCNBddBbYqoo}

# Gateway URL for centralized logging
gateway.service.url=${GATEWAY_SERVICE_URL:http://localhost:8080}

logging.centralized.min-level=${CENTRALIZED_LOG_LEVEL:ERROR}
logging.centralized.enabled=${CENTRALIZED_LOGGING_ENABLED:true}

# Database
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/motori_users}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:toor}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false

server.port=8081

# Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=false
eureka.instance.hostname=localhost
eureka.instance.instance-id=${spring.application.name}:${server.port}

management.endpoints.web.exposure.include=health,info,metrics,loggers
management.endpoint.health.show-details=always
management.endpoints.web.base-path=/actuator

# Email (for verification/approval templates)
email.superadmin.address=${SUPERADMIN_EMAIL:admin@motori.com}
email.frontend.base-url=${FRONTEND_BASE_URL:http://localhost:5173}
email.verification.subject=${EMAIL_VERIFICATION_SUBJECT:Verify Your Email}
email.verification.body=${EMAIL_VERIFICATION_BODY:Hello {firstname}, please verify: {verificationLink}}
email.approval.subject=${EMAIL_APPROVAL_SUBJECT:Account Approved}
email.approval.body=${EMAIL_APPROVAL_BODY:Hello {firstname}, your account is approved. Email: {email}}
email.superadmin-notification.subject=${EMAIL_SUPERADMIN_NOTIFICATION_SUBJECT:New User - Approval Required}
email.superadmin-notification.body=${EMAIL_SUPERADMIN_NOTIFICATION_BODY:New user: {firstname} {lastname}, {email}, role {role}, id {userId}}

logging.level.com.motori=INFO
logging.level.org.springframework.security=INFO
logging.level.org.keycloak=INFO
